<!DOCTYPE html>
<html lang="pt">
<head>
          <title>wille.blog.br</title>
        <meta charset="utf-8" />
        <link href="http://wille.blog.br/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="wille.blog.br Full Atom Feed" />
        <link href="http://wille.blog.br/feeds/softwarelivre-tech-tutoriais.atom.xml" type="application/atom+xml" rel="alternate" title="wille.blog.br Categories Atom Feed" />



    <meta name="tags" content="geojson" />
    <meta name="tags" content="mapas" />
    <meta name="tags" content="openstreetmap" />
    <meta name="tags" content="tutoriais" />

</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="http://wille.blog.br/">wille.blog.br <strong>OpenStreetMap, Python, Bikes, Travels, Life...</strong></a></h1>
        </header><!-- /#banner -->
        <nav id="menu"><ul>
        </ul></nav><!-- /#menu -->
<section id="content" class="body">
  <header>
    <h2 class="entry-title">
      <a href="http://wille.blog.br/2013/11/criando-um-mapa-com-dados-importados-do-openstreetmap" rel="bookmark"
         title="Permalink to Criando um mapa com dados importados do OpenStreetMap">Criando um mapa com dados importados do OpenStreetMap</a></h2>
 
  </header>
  <footer class="post-info">
    <abbr class="published" title="2013-11-06T23:38:00-02:00">
      qua 06 novembro 2013
    </abbr>
    <address class="vcard author">
      By           <a class="url fn" href="http://wille.blog.br/author/wille">wille</a>
    </address>
  </footer><!-- /.post-info -->
  <div class="entry-content">
    <p>Eu mapeei todas as estações de compartilhamento de bicicletas do
BikeSalvador e queria fazer um mapa que mostrasse essas estações. Quando
havia apenas cinco estações, após mapear no OSM, eu criei um arquivo
GeoJSON usando o <a href="http://geojson.io">geojson.io</a>. Porém agora já são 19
estações. Seria um retrabalho enorme mapear as estações no OSM e depois
criar o geojson manualmente.</p>
<p>Felizmente conheci o osmfilter, um software para filtrar os dados do
<a href="http://osm.org">OpenStreetMap</a>. Combinando o osmfilter com o geojson.io
é possível facilmente extrair alguns dados do OpenStreetMap e apresentar
essa informação em um mapa personalizado. Então vamos às instruções de
como fazer isso.</p>
<p>O primeiro passo é baixar os dados do OSM. Se você quiser trabalhar com
a base de dados de todo o Brasil, você pode baixar dos servidores do
<a href="http://download.geofabrik.de">GeoFabrik</a>. Como eu necessitava apenas
dos dados de uma cidade, utilizei o editor
<a href="http://josm.openstreetmap.de/">JOSM</a>, fiz o download dos dados e salvei
em um arquivo .osm no meu computador.</p>
<p><img alt="Download dos dados no
JOSM" src="http://images.wille.blog.br/josm.jpg" /></p>
<p>Agora nós precisamos utilizar o osmfilter. Veja as instruções de
instalação na página <a href="https://wiki.openstreetmap.org/wiki/Osmfilter">osmfilter no Wiki do
OpenStreetMap</a>. O comando
que eu utilizei para filtrar as estações de compartilhamento de
bicicletas de Salvador foi:</p>
<p><code>./osmfilter salvador.osm --keep="amenity=bicycle_rental" &gt; bikesalvador.osm</code></p>
<p>Você pode combinar mais de um filtro em um único comando. Por exemplo,
se você quiser filtrar todos os restaurantes italianos, você poderia
utilizar <code>--keep="amenity=restaurant and cuisine=italian"</code>.</p>
<p>Aqui entra o <a href="http://geojson.io">geojson.io</a>. Acesse o site, clique no
botão Open e importe o arquivo gerado pelo osmfilter.</p>
<p><img alt="geojson.io
interface" src="http://images.wille.blog.br/geojson-open.jpg" /></p>
<p>Após isso, você vai ver todos os dados filtrados sobre o mapa, inclusive
os metadados. Se parte dos metadados não te interessar, você pode
remover uma ou mais colunas.</p>
<p>Você vai precisar de uma conta no <a href="http://github.com">GitHub</a> para
salvar seu arquivo GeoJSON. Depois de salvar, o GitHub irá te fornecer
uma <a href="https://gist.github.com/willemarcel/37a8be9409baa07cf31e">página com o seu
GeoJSON</a> e
também um código para que você possa incluir o mapa que você criou em
uma página web. O mapa gerado pelo geojson.io é esse abaixo:</p>
<p>
<script src="https://gist.github.com/willemarcel/37a8be9409baa07cf31e.js"></script>
</p>

<p>Quem quiser criar um mapa ainda melhor, recomendo ler esse <a href="http://lyzidiamond.com/posts/osgeo-august-meeting/">tutorial de
como adicionar uma camada GeoJSON ao
Leaflet</a>.</p>
  </div><!-- /.entry-content -->
</section>
        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a href="http://getpelican.com/">Pelican</a>,
                which takes great advantage of <a href="http://python.org">Python</a>.
                </address><!-- /#about -->
        </footer><!-- /#contentinfo -->
</body>
</html>